<div class="awidget full-width">
   <div class="awidget-head">
      <div class="row">
         <div class="col-md-12 col-sm-12">
            <h3>部件信息
            <p class="pull-right">
               <!-- Button trigger modal -->
               <button type="button" class="btn btn-info" data-toggle="modal" data-target="#orderUnitsModal">
               编辑
               </button>
            </p>
            </h3>
         </div>
      </div>
   </div>
   <div class="awidget-body">
      <div class="table-responsive" style="height: 300px;">
         <table class="table table-border">
            <thead>
               <tr>
                  <td>部件名称</td>
                  <td>板料</td>
                  <td>长</td>
                  <td>宽</td>
                  <td>厚</td>
                  <td>数量</td>
                  <td>剪裁尺寸</td>
                  <td>颜色</td>
                  <td>封边</td>
                  <td>纹理</td>
                  <td>备注</td>
               </tr>
            </thead>
            <tbody>
               <% @order_units.each do |unit|%>
               <tr>
                  <td><%= unit.unit_name%></td>
                  <td><%= unit.name%></td>
                  <td><%= unit.lenght%></td>
                  <td><%= unit.width%></td>
                  <td><%= unit.thick%></td>
                  <td><%= unit.number%></td>
                  <td><%= unit.size%></td>
                  <td><%= unit.color%></td>
                  <td><%= unit.edge%></td>
                  <td><%= unit.texture%></td>
                  <td><%= unit.note%></td>
               </tr>
               <% end %>
            </tbody>
         </table>
      </div>
   </div>
</div>
<!-- Modal -->
<div class="modal fade" id="orderUnitsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
   <div class="modal-dialog" role="document" style="width:auto;">
      <div class="modal-content">
         <%= nested_form_for @order do |f| %>
         <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">订单：<%= @order.order_code %> <small>部件</small></h4>
         </div>
         <div class="modal-body">
            <table class="table" id="units">
               <tr>
                  <td>部件名称</td>
                  <td>板料</td>
                  <td>长</td>
                  <td>宽</td>
                  <td>厚</td>
                  <td>数量</td>
                  <td>剪裁尺寸</td>
                  <td>颜色</td>
                  <td>封边</td>
                  <td>纹理</td>
                  <td>备注</td>
                  <td>操作</td>
               </tr>
               <%= f.fields_for :order_units, :wrapper => false do |unit_form| %>
               <tr class="fields">

                  <td>
                     <%= unit_form.text_field(:unit_name, class: 'form-control') %>
                  </td>
                  <td>
                     <%= unit_form.text_field(:name, class: 'form-control') %>
                  </td>
                  <td>
                     <%= unit_form.text_field(:lenght, class: 'form-control') %>
                  </td>
                  <td>
                     <%= unit_form.text_field(:width, class: 'form-control') %>
                  </td>
                  <td>
                     <%= unit_form.text_field(:thick, class: 'form-control') %>
                  </td>
                  <td>
                     <%= unit_form.text_field(:number, class: 'form-control') %>
                  </td>
                  <td>
                     <%= unit_form.text_field(:size, class: 'form-control') %>
                  </td>
                  <td>
                     <%= unit_form.text_field(:color, class: 'form-control') %>
                  </td>
                  <td>
                     <%= unit_form.text_field(:edge, class: 'form-control') %>
                  </td>
                  <td>
                     <%= unit_form.text_field(:texture, class: 'form-control') %>
                  </td>
                  <td>
                     <%= unit_form.text_field(:note, class: 'form-control') %>
                  </td>
                  <td>
                     <%= unit_form.link_to_remove "删除", class: 'btn btn-info' %>
                  </td>
               </tr>
               <% end %>
            </table>
            <p><%= f.link_to_add "添加", :order_units, :data => { :target => "#units" }, class: 'btn btn-info' %></p>
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            <%= submit_tag "保存", class: 'btn btn-info'%>
         </div>
         <% end%>
      </div>
   </div>
</div>